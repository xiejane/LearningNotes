# BaseNotes
[应用基础知识](https://developer.android.google.cn/guide/components/fundamentals)

- Android 安全功能的保护
    - Android 操作系统是一种多用户 Linux 系统，其中的每个应用都是一个不同的用户
    - 默认情况下，系统会为每个应用分配一个唯一的 Linux 用户 ID(该 ID 仅由系统使用，应用并不知晓)，系统会为应用中的所有文件设置权限，使得只有分配给该应用的用户 ID 才能访问这些文件
    - 每个进程都拥有自己的虚拟机(VM)，因此应用代码独立于其他应用而运行
    - 默认情况下，每个应用都在自己的 Linux 进程内运行。Android 系统会在需要执行任何应用组件时启动该进程，然后当不再需要该进程或系统必须为其他应用恢复内存时，其便会关闭该进程。

- Android 系统实现了`最小权限原则`，每个应用只能访问执行其工作所需的组件，而不能访问其他组件


## 应用组件

- 概览
    - activity
    - 服务
    - 广播接收器
    - 内容提供程序
- 每种类型都有不同的用途和生命周期，生命周期定义如何创建和销毁组件

### Activity

- 是与用户交互的入口点，表示拥有界面的单个屏幕
- 有助于完成系统和应用程序之间的重要交互
    - 追踪用户当前关心的内容（屏幕上显示的内容），以确保系统继续运行托管 Activity 的进程
    - 了解先前使用的进程包含用户可能返回的内容（已停止的 Activity），从而更优先保留这些进程
    - 帮助应用处理终止其进程的情况，以使用户可以返回已恢复其先前状态的 Acticity
    - 提供一种途径，让应用实现彼此之间的用户流，并让系统协调这些用户流（如：共享）

### 服务

- 服务是一个通用入口点，用于因各种原因使应用在后台保持运行状态。
- 是一种在后台运行的组件，用于执行长时间运行的操作或为远程进程执行作业
- 服务不提供界面
- 运行服务或绑定服务
    - 绑定服务：为另一个进程提供 API 的服务


### 广播接收器

- 借助广播接收器，系统能够在常规用户流之外向应用传递事件，从而允许应用响应系统范围内的广播通知。
- 系统甚至可以向当前未运行的应用传递广播
- 广播接收器常见的用途只是作为通向其他组件的通道


### 内容提供程序

- 内容提供程序管理一组共享的应用数据，可以将这些数据存储在文件系统、SQLite数据库、网络中或者应用可以访问到的任何其他持久化存储位置
- 其他应用可通过内容提供程序查询或修改数据
- 容易将内容提供器看作数据库上的抽象，因为其内置的大量 API 和支持


## 启动组件

- 在四种组件类型中，有三种（Activity、服务和广播接收器）均通过异步消息 `Intent` 进行启动
- Intent 会在运行时对各个组件进行相互绑定，可以将 Intent 视为从其他组件请求操作的信使

- 对于 Activity 和服务，Intent 会定义要执行的操作，并且可指定待操作数据的 URI，以及正在启动的组件可能需要了解的信息。
- 对于广播接收器，Intent 只会定义待广播的通知

## 清单文件

- 系统在启动应用组件之前，系统必须通过读取应用的清单文件(AndroidManifest.xml)确认组件的存在。应用必须在此文件中声明所有组件，该文件必须位于应用项目目录的更目录中
- 清单文件的作用
    - 确定应用所需要的任何用户权限
    - 根据应用使用的 API ，声明应用所需的最低 API 级别
    - 声明应用使用或需要的硬件和软件功能，如相机、蓝牙
    - 声明应用需要链接的 API 库（ Android 框架 API 除外），如 Google 地图

- 声明组件
    - `<activity>`
    - `<service>`
    - `<receiver>`
    - `<provider>`
- 声明组件功能：使用隐式 Intent 来描述要执行的操作类型和待操作数据（可选）

- 声明应用要求

## 应用资源

- Android 应用并非仅包含代码，它还需要与源代码分离的资源，如图像、音频文件以及任何与应用的视觉呈现有关的内容
- 对于您在 Android 项目中加入的每一项资源，SDK 构建工具均会定义唯一的整型 ID，您可以利用此 ID 来引用资源，这些资源或来自应用代码，或来自 XML 中定义的其他资源
- 如果提供与源代码分离的资源，则其中最重要的一个优点在于，您可以提供适用于不同设备配置的备用资源
- 如果提供与源代码分离的资源，则其中最重要的一个优点在于，您可以提供适用于不同设备配置的备用资源